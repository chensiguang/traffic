<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.web.dao.SafeNoticeDao">	<!-- 安全提醒 -->	<resultMap id="BaseResultMap" type="com.web.pojo.SafeNotice">		<id 	column="id" 				property="id" 				jdbcType="INTEGER" />		<result column="notice_type"  		property="noticeType"  		jdbcType="VARCHAR" />		<result column="notice_title" 		property="noticeTitle" 		jdbcType="VARCHAR" />		<result column="notice_time"  		property="noticeTime"  		jdbcType="TIMESTAMP" />		<result column="notice_content_url" property="noticeContentUrl" jdbcType="VARCHAR" />		<result column="notice_content" 	property="noticeContent" 	jdbcType="VARCHAR" />		<result column="operid" 			property="operid" 			jdbcType="INTEGER" />	    <result column="opertime" 			property="opertime" 		jdbcType="TIMESTAMP" />	    <result column="regid" 				property="regid" 			jdbcType="INTEGER" />	    <result column="regtime" 			property="regtime" 			jdbcType="TIMESTAMP" />	    <result column="state" 				property="state" 			jdbcType="INTEGER" />	    <result column="remark" 			property="remark" 			jdbcType="VARCHAR" />	 <association property="admin" javaType="com.web.pojo.Admin">        <id property="userno" jdbcType="INTEGER" />       <result property="username" jdbcType="VARCHAR" />    </association>	</resultMap>	  		<!-- 查找操作人 -->	<select id="selectUsernameById" resultMap="BaseResultMap"		parameterType="com.web.pojo.SafeNotice">		select i.*, u.username,u.userno from tp_traffic_notice i left join tp_sys_user u        on i.operid = u.userno where i.id = #{id,jdbcType=INTEGER} 	</select>	  			<!-- 前台显示 -->	<select id="selectNoticeList" resultMap="BaseResultMap" >	    select 	    	* 	    from tp_traffic_notice  	    where state = 1 and notice_type = 1 	    order by notice_time desc limit ${param1},${param2}   	</select>  		<select id="selectCount" resultType="java.lang.Integer" >	    select 	    	count(id) 	    from tp_traffic_notice 	    where state = 1 and notice_type = 1 	    order by notice_time desc  	</select>  	<select id="selectNoticeInfoById" resultMap="BaseResultMap" >	    select 	    	* 	    from tp_traffic_notice 	    where state = 1 and notice_type = 1 and id = #{id,jdbcType=INTEGER}  	</select>  	  	<!-- 后台管理 -->  	  	<!-- 查询所有 -->  	<select id="queryAll" resultMap="BaseResultMap">  		select   			*   		from tp_traffic_notice   		where state = 1 and notice_type = 1   		order by regtime desc   	</select>  	  	<!-- 新增-提交 -->  	<insert id="insertSafeNotice" parameterType="com.web.pojo.SafeNotice">		insert into tp_traffic_notice 		(			id,notice_type,notice_content,notice_title,notice_time,notice_content_url,			operid,opertime,state,remark,regtime,regid		)		values		(			#{id,jdbcType=INTEGER},	   		#{noticeType,jdbcType=INTEGER},	   		#{noticeContent,jdbcType=VARCHAR},	   		#{noticeTitle,jdbcType=VARCHAR},	   		#{noticeTime,jdbcType=TIMESTAMP},	   		#{noticeContentUrl,jdbcType=VARCHAR},	   		#{operid,jdbcType=VARCHAR},	   		#{opertime,jdbcType=TIMESTAMP},	   		#{state,jdbcType=INTEGER},	   		#{remark,jdbcType=VARCHAR},	   		#{regtime,jdbcType=TIMESTAMP},	   		#{regid,jdbcType=VARCHAR}		)  	</insert>  	  	<!-- 修改-编辑 -->  	<select id="queryDataById" resultMap="BaseResultMap" parameterType="java.lang.Integer">  		select   			*   		from tp_traffic_notice   		where state = 1 and notice_type = 1   		and id = #{id,jdbcType=INTEGER}  	</select>  	  	<!-- 修改-提交 -->  	<update id="updateSafeNotice" parameterType="com.web.pojo.SafeNotice">		update tp_traffic_notice 		set 	   		notice_content     = #{noticeContent,jdbcType=VARCHAR},	   		notice_title       = #{noticeTitle,jdbcType=VARCHAR},	   		notice_content_url = #{noticeContentUrl,jdbcType=VARCHAR},	   		operid             = #{operid,jdbcType=VARCHAR},	   		opertime           = #{opertime,jdbcType=TIMESTAMP},	   		remark             = #{remark,jdbcType=VARCHAR}   		where state = 1 and notice_type = 1   		and id = #{id,jdbcType=INTEGER}  	</update>  	  	<!-- 单个删除、批量删除 -->  	<update id="dropDataById" parameterType="java.lang.Integer">		update tp_traffic_notice 		set	   		state = 0   		where state = 1 and notice_type = 1   		and id = #{id,jdbcType=INTEGER}  	</update>  	<!--查看信息标题是否重复 -->  	<select id="selectSafeNoticeByNoticeTitle" resultType="java.lang.Integer" parameterType="com.web.pojo.SafeNotice">  		select   			count(*)   		from tp_traffic_notice   		where state = 1 and notice_type = 1   		<if test="id != null">  		and id != #{id,jdbcType=INTEGER}   		</if>  		and notice_title = #{noticeTitle,jdbcType=VARCHAR}  	</select>  	  	<!-- 后台分页管理 -->  	  	<!--查询总记录数 -->  	<select id="getCountByAll" resultType="java.lang.Integer" parameterType="java.util.HashMap">  		select count(*) from(	  		select 	  			* 	  		from tp_traffic_notice 	  		where state = 1 and notice_type = 1 	  		<if test="noticeTitle != null">			and notice_title like concat('%',#{noticeTitle,jdbcType=VARCHAR},'%' ) 	  		</if>  			order by regtime desc   		)t  	</select>  	  	<!--分页、条件查询 -->  	<select id="selectPage" resultMap="BaseResultMap" parameterType="java.util.HashMap">  		select   			*   		from tp_traffic_notice   		where state = 1 and notice_type = 1   		<if test="noticeTitle != null">		and notice_title like concat('%',#{noticeTitle,jdbcType=VARCHAR},'%' )   		</if>  		order by regtime desc limit #{curnum,jdbcType=INTEGER},#{pagesize,jdbcType=INTEGER}  	</select></mapper>