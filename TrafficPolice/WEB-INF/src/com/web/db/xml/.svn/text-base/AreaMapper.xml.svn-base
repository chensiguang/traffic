<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.web.dao.AreaDao">	<!-- 地区 -->	<resultMap id="BaseResultMap" type="com.web.pojo.Area">		<id 	column="areaid" 		property="areaid" 		jdbcType="INTEGER" />		<result column="areaname" 		property="areaname" 	jdbcType="VARCHAR" />		<result column="parentid" 		property="parentid" 	jdbcType="INTEGER" />		<result column="description"	property="description" 	jdbcType="VARCHAR" />		<result column="orderno" 		property="orderno" 		jdbcType="INTEGER" />		<result column="mailcode"		property="mailcode" 	jdbcType="VARCHAR" />		<result column="callcode"		property="callcode" 	jdbcType="VARCHAR" />		<result column="operid"   		property="operid" 		jdbcType="INTEGER" />	    <result column="opertime" 		property="opertime" 	jdbcType="TIMESTAMP" />	    <result column="regid" 			property="regid" 		jdbcType="INTEGER" />	    <result column="regtime" 		property="regtime" 		jdbcType="TIMESTAMP" />	    <result column="state" 			property="state" 		jdbcType="INTEGER" />	    <result column="remark" 		property="remark" 		jdbcType="VARCHAR" />	    	 <association property="admin" javaType="com.web.pojo.Admin">        <id property="userno" jdbcType="INTEGER" />       <result property="username" jdbcType="VARCHAR" />    </association>	</resultMap>	  		<!-- 查找操作人 --><!-- 	<select id="selectUsernameById" resultMap="BaseResultMap"		parameterType="com.web.pojo.Area">		select i.*, u.username,u.userno from tp_basic_area i left join tp_sys_user u        on i.operid = u.userno where i.areaid = #{id,jdbcType=INTEGER} 	</select> -->		  	<!-- 后台管理 -->  	  	<!-- 查询所有地区-->  	<select id="queryAll" resultMap="BaseResultMap">  		select   			areaid,areaname   		from tp_basic_area   		where state = 1   		order by regtime desc   	</select>   	  	<!-- 单个删除、批量删除 -->  	<update id="dropDataById" parameterType="java.lang.Integer">		update tp_basic_area 		set	   		state = 0   		where state = 1    		and areaid = #{areaid,jdbcType=INTEGER}  	</update>  	  	<!-- 新增-提交 -->  	<insert id="insertArea" parameterType="com.web.pojo.Area">		insert into tp_basic_area 		(			areaid,areaname,parentid,description,mailcode,callcode,			operid,opertime,state,remark,regtime,regid		)		values		(			#{areaid,jdbcType=INTEGER},	   		#{areaname,jdbcType=VARCHAR},	   		#{parentid,jdbcType=INTEGER},	   		#{description,jdbcType=INTEGER},	   		#{mailcode,jdbcType=VARCHAR},	   		#{callcode,jdbcType=VARCHAR},	   		#{operid,jdbcType=VARCHAR},	   		#{opertime,jdbcType=TIMESTAMP},	   		#{state,jdbcType=INTEGER},	   		#{remark,jdbcType=VARCHAR},	   		#{regtime,jdbcType=TIMESTAMP},	   		#{regid,jdbcType=VARCHAR}		)  	</insert>  	  	<!-- 修改-编辑 -->  	<select id="queryDataById" resultMap="BaseResultMap" parameterType="java.lang.Integer">		select 			* 		from tp_basic_area 		where state = 1   		and areaid = #{areaid,jdbcType=INTEGER}  	</select>  	  	<!-- 查看地域名称是否重复 -->  	<select id="selectAreaByAreaName" resultType="java.lang.Integer" parameterType="com.web.pojo.Area">  		select   			count(*)   		from tp_basic_area  		where state = 1   		<if test="areaid != null">  		and areaid != #{areaid,jdbcType=INTEGER}   		</if>  		and areaname = #{areaname,jdbcType=VARCHAR}  	</select>  	  	<!-- 修改-提交 -->  	<update id="updateArea" parameterType="com.web.pojo.Area">		update tp_basic_area 		set	   		areaname		= #{areaname,jdbcType=VARCHAR},	   		mailcode       	= #{mailcode,jdbcType=VARCHAR},	   		callcode 		= #{callcode,jdbcType=VARCHAR},	   		description		= #{description,jdbcType=VARCHAR},	   		remark      	= #{remark,jdbcType=VARCHAR}, 	   		operid    		= #{areaid,jdbcType=INTEGER},	   		opertime   		= #{opertime,jdbcType=TIMESTAMP}  		where state = 1    		and areaid = #{areaid,jdbcType=INTEGER}  	</update>  	  	<!-- 后台分页管理 -->  	  	<!--查询总记录数 -->  	<select id="getCountByAll" resultType="java.lang.Integer" parameterType="java.util.HashMap">  		select count(*) from (	  		select 	  			* 	  		from tp_basic_area 	  		where state = 1 	  		order by regtime desc   		)t  	</select>  	  	<!--分页、条件查询-->  	<select id="selectPage" resultMap="BaseResultMap" parameterType="java.util.HashMap">  		select   			*    		from tp_basic_area   		where state = 1   		<if test="parentid != null">		and parentid = #{parentid,jdbcType=INTEGER} 		</if>  		order by areaid limit #{curnum,jdbcType=INTEGER},#{pagesize,jdbcType=INTEGER}  	</select></mapper>