<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.web.dao.PoliceOrgDao">	<!-- 交警部门 -->	<resultMap id="BaseResultMap" type="com.web.pojo.PoliceOrg">		<id 	column="id" 		property="id" 			jdbcType="INTEGER" />		<result column="orgname" 	property="orgname" 		jdbcType="VARCHAR" />		<result column="typeid" 	property="typeid" 		jdbcType="INTEGER" />		<result column="phone" 		property="phone" 		jdbcType="VARCHAR" />		<result column="address" 	property="address" 		jdbcType="VARCHAR" />		<result column="name" 	property="name" 		jdbcType="VARCHAR" />		<result column="pid" 		property="pid" 			jdbcType="INTEGER" />		<result column="operid"   	property="operid" 		jdbcType="INTEGER" />	    <result column="opertime" 	property="opertime" 	jdbcType="TIMESTAMP" />	    <result column="regid" 		property="regid" 		jdbcType="INTEGER" />	    <result column="regtime" 	property="regtime" 		jdbcType="TIMESTAMP" />	    <result column="state" 		property="state" 		jdbcType="INTEGER" />	    <result column="remark" 	property="remark" 		jdbcType="VARCHAR" />	 <association property="admin" javaType="com.web.pojo.Admin">        <id property="userno" jdbcType="INTEGER" />       <result property="username" jdbcType="VARCHAR" />    </association>     	 <association property="policeOrg" javaType="com.web.pojo.PoliceOrg">       <result property="orgname" jdbcType="VARCHAR" />    </association>     	</resultMap>	 	<select id="selectUsernameById" resultMap="BaseResultMap"		parameterType="com.web.pojo.PoliceOrg">		select i.*, u.username,u.userno from tp_basic_policeorg i left join tp_sys_user u        on i.operid = u.userno where i.id = #{id,jdbcType=INTEGER} 	</select>  	  	<select id="queryAll" resultMap="BaseResultMap">  		select *  		from tp_basic_policeorg   		where state = 1 <!-- and typeid = 5 -->  		order by regtime desc   	</select>  	  	<select id="selectAll" resultMap="BaseResultMap">  		select *  		from tp_basic_policeorg   		where state = 1  	</select>  	  	<!-- 通过单位id查找它的子类单位 -->  	<select id="queryAllByDwid" resultMap="BaseResultMap">  		select *  		from tp_basic_policeorg   		where state = 1   		and pid = #{dwid}  	</select> 	  				 	<select id="newOrUpdate" resultType="java.lang.Integer" parameterType="com.web.pojo.PoliceOrg">  		select   			count(*)   		from tp_basic_policeorg   		where state = 1  		<if test="id != null">  		and id != #{id,jdbcType=INTEGER}   		</if>  		and orgname = #{orgname,jdbcType=VARCHAR}  	</select>  	    			<insert id="insertPoliceOrg" parameterType="com.web.pojo.PoliceOrg">		insert into		tp_basic_policeorg(id,orgname,phone,typeid,address,pid,operid,opertime,remark,regtime)		values		(		#{id,jdbcType=INTEGER},		#{orgname,jdbcType=VARCHAR},		#{phone,jdbcType=VARCHAR},		#{typeid,jdbcType=INTEGER},		#{address,jdbcType=VARCHAR},		#{pid,jdbcType=INTEGER},		#{operid,jdbcType=INTEGER},		#{opertime,jdbcType=TIMESTAMP},		#{remark,jdbcType=VARCHAR},		#{regtime,jdbcType=TIMESTAMP}		)	</insert> 	<select id="queryDataById" resultMap="BaseResultMap"		parameterType="com.web.pojo.PoliceOrg">		select *		from tp_basic_policeorg		where id = #{id,jdbcType=INTEGER}	</select> 		<update id="updatePoliceOrg" parameterType="com.web.pojo.PoliceOrg">		update tp_basic_policeorg		set		orgname = #{orgname,jdbcType=VARCHAR},		phone = #{phone,jdbcType=VARCHAR},		typeid = #{typeid,jdbcType=INTEGER},		address = #{address,jdbcType=VARCHAR},		opertime = #{opertime,jdbcType=TIMESTAMP},		remark = #{remark,jdbcType=VARCHAR}		where id = #{id,jdbcType=INTEGER}	</update>	<update id="deleteDataById" parameterType="java.lang.Integer">		update tp_basic_policeorg		set state = 0		where id = #{id,jdbcType=INTEGER}	</update>		<select id="getCountByAll" resultType="java.lang.Integer"		parameterType="java.util.HashMap">		select count(*) from tp_basic_policeorg where state = 1 		<if test="searchorgname != null">		    and orgname like CONCAT('%',#{searchorgname},'%' )		</if>		<if test="searchstarttime != null">		  and regtime >= str_to_date(#{searchstarttime},'%Y-%m-%d')		</if>		<if test="searchendtime != null">	       and DATE_ADD(str_to_date(#{searchendtime},'%Y-%m-%d'),INTERVAL 1 day) >= regtime		</if>		<if test="id != null">		    and id = #{id}		</if>		<if test="dwid != null">		    and pid = #{dwid}		</if>	</select>	<select id="selectPage" resultMap="BaseResultMap" parameterType="java.util.HashMap">		select a.*,b.orgname as name		from tp_basic_policeorg a		left join tp_basic_policeorg b		on a.pid = b.id		 where a.state = 1 		<if test="id != null">		and a.id = #{id,jdbcType=INTEGER} 		</if>		<if test="searchorgname != null">		and a.orgname like CONCAT('%',#{searchorgname},'%' )		</if>		<if test="searchstarttime != null">		  and a.regtime >= str_to_date(#{searchstarttime},'%Y-%m-%d')		</if>		<if test="searchendtime != null">	       and DATE_ADD(str_to_date(#{searchendtime},'%Y-%m-%d'),INTERVAL 1 day) >= a.regtime		</if>		<if test="id != null">		    and a.id = #{id}		</if>		<if test="dwid != null">		    and a.pid = #{dwid}		</if>		order by a.id limit		#{curnum,jdbcType=INTEGER},#{pagesize,jdbcType=INTEGER}	</select> </mapper>